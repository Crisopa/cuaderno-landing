---
const faqs = [
  {
    question: '¿Esto sirve para las inspecciones o tengo que usar también la app del Ministerio?',
    answer: 'Sirve perfectamente. Los informes que genera Cuaderno cumplen con todos los requisitos del RD 1311/2012. Cuando venga la inspección, le enseñas el informe exportado y listo. No necesitas usar la aplicación oficial del Ministerio.',
  },
  {
    question: '¿Y si luego me obligan a usar la del Ministerio?',
    answer: 'Puedes exportar todos tus datos en cualquier momento. Si algún día necesitas pasarlos a otro sistema, no pierdes nada de lo que hayas registrado. Tus datos son tuyos.',
  },
  {
    question: '¿Tengo que meter todos los datos del SIGPAC de mis parcelas?',
    answer: 'Solo una vez. Añades tus parcelas con sus referencias (provincia, municipio, polígono, parcela, recinto) y ya no tienes que volver a escribirlo. Cuando registres un tratamiento, solo seleccionas la parcela de la lista.',
  },
  {
    question: '¿Qué pasa cuando acaba la prueba de 30 días?',
    answer: 'Si no eliges un plan de pago, tu cuenta pasa a modo solo lectura. No pierdes nada: puedes ver tus datos y exportarlos, pero no añadir registros nuevos. Cuando quieras, activas un plan y sigues donde lo dejaste.',
  },
  {
    question: '¿Puedo cancelar cuando quiera?',
    answer: 'Sí, sin permanencia ni historias. Si un mes decides que no lo necesitas, cancelas y no se te vuelve a cobrar. Tus datos se mantienen disponibles para exportar durante 6 meses después de cancelar.',
  },
  {
    question: '¿Funciona en el móvil?',
    answer: 'Sí, funciona en cualquier dispositivo con navegador. No necesitas instalar ninguna app. Puedes registrar un tratamiento desde el móvil mientras estás en la finca si hace falta.',
  },
  {
    question: '¿Esto lo puede usar mi gestor o asesor?',
    answer: 'Sí. Con el plan Enterprise puedes tener hasta 5 usuarios. Ideal si tienes un asesor que te lleva el cuaderno o si eres una cooperativa que gestiona varias explotaciones de socios.',
  },
]
---

<section id="faq" class="py-20 sm:py-28 bg-gray-50">
  <div class="mx-auto max-w-3xl px-4 sm:px-6 lg:px-8">
    <!-- Header -->
    <div class="text-center">
      <span class="inline-flex items-center rounded-full bg-primary-100 px-4 py-1 text-sm font-medium text-primary-800">
        Preguntas frecuentes
      </span>
      <h2 class="mt-4 text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl">
        Lo que nos suelen preguntar
      </h2>
      <p class="mt-4 text-lg text-gray-600">
        Si no encuentras tu respuesta, escríbenos y te contestamos.
      </p>
    </div>

    <!-- FAQ Accordion -->
    <div class="mt-12 space-y-4">
      {faqs.map((faq, index) => (
        <div class="faq-item rounded-xl border border-gray-200 bg-white overflow-hidden">
          <button
            type="button"
            class="faq-button flex w-full items-center justify-between px-6 py-5 text-left"
            aria-expanded="false"
            aria-controls={`faq-content-${index}`}
          >
            <span class="text-base font-medium text-gray-900 pr-4">{faq.question}</span>
            <svg
              class="faq-icon h-5 w-5 flex-shrink-0 text-gray-500 transition-transform duration-200"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
          <div
            id={`faq-content-${index}`}
            class="faq-content hidden px-6 pb-5"
          >
            <p class="text-gray-600 leading-relaxed">{faq.answer}</p>
          </div>
        </div>
      ))}
    </div>

    <!-- Contact CTA -->
    <div class="mt-12 text-center">
      <p class="text-gray-600">
        ¿Tienes otra duda?
      </p>
      <a
        href="mailto:hola@cuaderno.es"
        class="mt-2 inline-flex items-center text-primary-700 hover:text-primary-800 font-medium"
      >
        Escríbenos a hola@cuaderno.es
        <svg class="ml-1 h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
        </svg>
      </a>
    </div>
  </div>
</section>

<script>
  const faqItems = document.querySelectorAll('.faq-item')

  faqItems.forEach(item => {
    const button = item.querySelector('.faq-button')
    const content = item.querySelector('.faq-content')
    const icon = item.querySelector('.faq-icon')

    button?.addEventListener('click', () => {
      const isExpanded = button.getAttribute('aria-expanded') === 'true'

      // Cerrar otros items (comportamiento accordion)
      faqItems.forEach(otherItem => {
        if (otherItem !== item) {
          const otherButton = otherItem.querySelector('.faq-button')
          const otherContent = otherItem.querySelector('.faq-content')
          const otherIcon = otherItem.querySelector('.faq-icon')

          otherButton?.setAttribute('aria-expanded', 'false')
          otherContent?.classList.add('hidden')
          otherIcon?.classList.remove('rotate-180')
        }
      })

      // Toggle current item
      button.setAttribute('aria-expanded', (!isExpanded).toString())
      content?.classList.toggle('hidden', isExpanded)
      icon?.classList.toggle('rotate-180', !isExpanded)
    })
  })
</script>
